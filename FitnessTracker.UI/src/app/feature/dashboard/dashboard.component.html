<div class="dashboard-container">
  <h1>Dashboard</h1>

  <mat-card class="dashboard-card date-picker-card">
    <mat-card-content>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Select Date</mat-label>
        <input matInput [matDatepicker]="picker" [formControl]="selectedDateControl">
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
    </mat-card-content>
  </mat-card>

  <div *ngIf="isLoading" class="loading-spinner">
    <mat-spinner diameter="40"></mat-spinner> Loading data...
  </div>
  <div *ngIf="errorMessage" class="error-message">
    <mat-icon color="warn">error_outline</mat-icon> {{ errorMessage }}
  </div>

  <mat-card class="dashboard-card macros-summary-card" *ngIf="dashboardSummary && !isLoading">
    <mat-card-header>
      <mat-card-title>
        Today: {{ dashboardSummary.todayDate | date:'fullDate' }}
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <h2>Macros Summary:</h2>
      <p>Calories: {{ dashboardSummary.caloriesConsumed }} / {{ dashboardSummary.dailyCalorieGoal }} kcal</p>
      <p>Protein: {{ dashboardSummary.proteinConsumed }}g / {{ dashboardSummary.dailyProteinGoal }}g</p>
      <p>Carbs: {{ dashboardSummary.carbsConsumed }}g / {{ dashboardSummary.dailyCarbGoal }}g</p>
      <p>Fats: {{ dashboardSummary.fatConsumed }}g / {{ dashboardSummary.dailyFatGoal }}g</p>
      <p>Completed Exercises: {{ dashboardSummary.completedExercisesToday }}</p>
      <p>Current Weight: {{ dashboardSummary.currentWeight }} kg</p>
    </mat-card-content>
  </mat-card>

  <mat-card class="dashboard-card action-buttons-card">
    <mat-card-content class="action-buttons-grid">
      <button mat-raised-button color="primary" (click)="addMeal()">
        <mat-icon>restaurant</mat-icon> Add Meal
      </button>
      <button mat-raised-button color="accent" (click)="addExercise()">
        <mat-icon>fitness_center</mat-icon> Add Exercise
      </button>
      <button mat-raised-button color="warn" (click)="logWeight()">
        <mat-icon>scale</mat-icon> Log Weight
      </button>
    </mat-card-content>
  </mat-card>

  <mat-card class="dashboard-card progress-graph-card">
    <mat-card-header>
      <mat-card-title>ðŸ“Š Progress Graph (Weight over Time)</mat-card-title>
    </mat-card-header>
    <mat-card-content class="chart-container">
      <canvas baseChart
        [data]="lineChartData"
        [options]="lineChartOptions"
        [type]="lineChartType">
      </canvas>
    </mat-card-content>
  </mat-card>

</div>