<div class="dashboard-container mat-elevation-z2">
  <mat-card>
    <mat-card-header class="header">
      <mat-card-title>Dashboard</mat-card-title>
      </mat-card-header>

    <mat-card-content>
      <mat-card class="dashboard-section-card date-picker-card">
        <mat-card-content>
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Select Date</mat-label>
            <input matInput [matDatepicker]="picker" [formControl]="selectedDateControl">
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </mat-card-content>
      </mat-card>

      <div *ngIf="isLoading" class="loading-state">
        <mat-spinner diameter="40"></mat-spinner>
        <p>Loading data...</p>
      </div>
      <div *ngIf="errorMessage" class="error-message">
        <mat-icon color="warn">error_outline</mat-icon>
        <p>{{ errorMessage }}</p>
      </div>

      <mat-card class="dashboard-section-card macros-summary-card" *ngIf="dashboardSummary && !isLoading">
        <mat-card-header class="section-header">
          <mat-card-title class="section-title">
            Today's Summary: {{ dashboardSummary.todayDate | date:'fullDate' }}
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <h2 class="section-subtitle">Macros Overview</h2>
          <div class="macros-pie-charts-grid">
            <div class="macro-pie-item">
              <h3>Calories</h3>
              <div class="chart-container">
                <canvas baseChart
                  [data]="caloriesPieData"
                  [options]="pieChartOptions"
                  [type]="pieChartType">
                </canvas>
              </div>
              <div class="macro-details">
                <span>Consumed: <strong>{{ dashboardSummary.caloriesConsumed }} kcal</strong></span>
                <span>Goal: {{ dashboardSummary.dailyCalorieGoal }} kcal</span>
              </div>
            </div>
            <div class="macro-pie-item">
              <h3>Protein</h3>
              <div class="chart-container">
                <canvas baseChart
                  [data]="proteinPieData"
                  [options]="pieChartOptions"
                  [type]="pieChartType">
                </canvas>
              </div>
              <div class="macro-details">
                <span>Consumed: <strong>{{ dashboardSummary.proteinConsumed }} g</strong></span>
                <span>Goal: {{ dashboardSummary.dailyProteinGoal }} g</span>
              </div>
            </div>
            <div class="macro-pie-item">
              <h3>Carbs</h3>
              <div class="chart-container">
                <canvas baseChart
                  [data]="carbsPieData"
                  [options]="pieChartOptions"
                  [type]="pieChartType">
                </canvas>
              </div>
              <div class="macro-details">
                <span>Consumed: <strong>{{ dashboardSummary.carbsConsumed }} g</strong></span>
                <span>Goal: {{ dashboardSummary.dailyCarbGoal }} g</span>
              </div>
            </div>
            <div class="macro-pie-item">
              <h3>Fat</h3>
              <div class="chart-container">
                <canvas baseChart
                  [data]="fatPieData"
                  [options]="pieChartOptions"
                  [type]="pieChartType">
                </canvas>
              </div>
              <div class="macro-details">
                <span>Consumed: <strong>{{ dashboardSummary.fatConsumed }} g</strong></span>
                <span>Goal: {{ dashboardSummary.dailyFatGoal }} g</span>
              </div>
            </div>
          </div>
          <mat-divider></mat-divider>
          <div class="additional-metrics">
            <!-- <p>Completed Exercises: <strong>{{ dashboardSummary.completedExercisesToday }}</strong></p> -->
            <p>Current Weight: <strong>{{ dashboardSummary.currentWeight }} kg</strong></p>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="dashboard-section-card action-buttons-card">
        <mat-card-content class="action-buttons-grid">
          <button mat-raised-button color="primary" (click)="addMeal()">
            <mat-icon>restaurant</mat-icon> Add Meal
          </button>
                  <button mat-raised-button color="accent" (click)="editMacros()">
            <mat-icon>settings</mat-icon> Change Macros
          </button>
              <button mat-raised-button color="primary" (click)="logWeight()">
            <mat-icon>monitor_weight</mat-icon> Log Weight
          </button>
          </mat-card-content>
      </mat-card>

      <!-- <mat-card class="dashboard-section-card progress-graph-card">
        <mat-card-header class="section-header">
          <mat-card-title class="section-title">ðŸ“Š Progress Graph (Weight over Time)</mat-card-title>
        </mat-card-header>
        <mat-card-content class="chart-container">
          <canvas baseChart
            [data]="lineChartData"
            [options]="lineChartOptions"
            [type]="lineChartType">
          </canvas>
        </mat-card-content>
      </mat-card> -->
    </mat-card-content>
  </mat-card>
</div>